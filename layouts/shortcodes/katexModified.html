{{- if not (.Page.Scratch.Get "katex") -}}
<!-- Include katex only first time -->
<link rel="stylesheet" href="{{ "katex/katex.min.css" | relURL }}" />
<script defer src="{{ "katex/katex.min.js" | relURL }}"></script>
<script defer src="{{ "katex/auto-render.min.js" | relURL }}" onload="renderMathInElement(document.body);"></script>
{{- .Page.Scratch.Set "katex" true -}}
{{- end -}}

<span {{- with .Get "class" }} class="{{ . }}"{{ end }}>{{ with .Get "display" }}\[{{else}}\({{end}}{{- .InnerDeindent -}}{{ with .Get "display" }}\]{{else}}\){{end}}</span><!-- removing the extra space that occurs before <span> and before </span> --><!-- see https://github.com/alex-shpak/hugo-book/blob/main/layouts/shortcodes/katex.html for code that this is based off of -->